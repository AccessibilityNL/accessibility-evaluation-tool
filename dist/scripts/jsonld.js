!function(){var a="undefined"!=typeof process&&process.versions&&process.versions.node,b=!a&&("undefined"!=typeof window||"undefined"!=typeof self);b&&"undefined"==typeof global&&("undefined"!=typeof window?global=window:"undefined"!=typeof self?global=self:"undefined"!=typeof $&&(global=$));var c=function(c){function d(){}function e(a){for(var b=[],c=Object.keys(a).sort(),d=0;d<c.length;++d){var e=c[d],f=a[e];L(f)||(f=[f]);for(var g=0;g<f.length;++g){var h=f[g];if(!N(h))throw new Cb("Invalid JSON-LD syntax; language map values must be strings.","jsonld.SyntaxError",{code:"invalid language map value",languageMap:a});b.push({"@value":h,"@language":e.toLowerCase()})}}return b}function f(a,b){if(L(b))for(var c=0;c<b.length;++c)b[c]=f(a,b[c]);else if(W(b))b["@list"]=f(a,b["@list"]);else if(J(b)){X(b)&&(b["@id"]=a.getName(b["@id"]));for(var d=Object.keys(b).sort(),e=0;e<d.length;++e){var g=d[e];"@id"!==g&&(b[g]=f(a,b[g]))}}return b}function g(a,b,d){if(null===d||void 0===d)return null;var e=E(a,b,{vocab:!0});if("@id"===e)return E(a,d,{base:!0});if("@type"===e)return E(a,d,{vocab:!0,base:!0});var f=c.getContextValue(a,b,"@type");if("@id"===f||"@graph"===e&&N(d))return{"@id":E(a,d,{base:!0})};if("@vocab"===f)return{"@id":E(a,d,{vocab:!0,base:!0})};if(I(e))return d;var g={};if(null!==f)g["@type"]=f;else if(N(d)){var h=c.getContextValue(a,b,"@language");null!==h&&(g["@language"]=h)}return-1===["boolean","number","string"].indexOf(typeof d)&&(d=d.toString()),g["@value"]=d,g}function h(a,b,c){for(var d=[],e=Object.keys(a).sort(),f=0;f<e.length;++f)for(var g=e[f],h=a[g],k=Object.keys(h).sort(),l=0;l<k.length;++l){var m=k[l],n=h[m];if("@type"===m)m=vb;else if(I(m))continue;for(var o=0;o<n.length;++o){var p=n[o],q={};if(q.type=0===g.indexOf("_:")?"blank node":"IRI",q.value=g,Y(g)){var r={};if(r.type=0===m.indexOf("_:")?"blank node":"IRI",r.value=m,Y(m)&&("blank node"!==r.type||c.produceGeneralizedRdf))if(W(p))i(p["@list"],b,q,r,d);else{var s=j(p);s&&d.push({subject:q,predicate:r,object:s})}}}}return d}function i(a,b,c,d,e){for(var f={type:"IRI",value:sb},g={type:"IRI",value:tb},h={type:"IRI",value:ub},i=0;i<a.length;++i){var k=a[i],l={type:"blank node",value:b.getName()};e.push({subject:c,predicate:d,object:l}),c=l,d=f;var m=j(k);m&&e.push({subject:c,predicate:d,object:m}),d=g}e.push({subject:c,predicate:d,object:h})}function j(a){var b={};if(V(a)){b.type="literal";var c=a["@value"],d=a["@type"]||null;R(c)?(b.value=c.toString(),b.datatype=d||mb):P(c)||d===nb?(b.value=c.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),b.datatype=d||nb):O(c)?(b.value=c.toFixed(0),b.datatype=d||ob):"@language"in a?(b.value=c,b.datatype=d||zb,b.language=a["@language"]):(b.value=c,b.datatype=d||pb)}else{var e=J(a)?a["@id"]:a;b.type=0===e.indexOf("_:")?"blank node":"IRI",b.value=e}return"IRI"!==b.type||Y(b.value)?b:null}function k(a,b){if("IRI"===a.type||"blank node"===a.type)return{"@id":a.value};var c={"@value":a.value};if(a.language)c["@language"]=a.language;else{var d=a.datatype;if(d||(d=pb),b){if(d===mb)"true"===c["@value"]?c["@value"]=!0:"false"===c["@value"]&&(c["@value"]=!1);else if(Q(c["@value"]))if(d===ob){var e=parseInt(c["@value"]);e.toFixed(0)===c["@value"]&&(c["@value"]=e)}else d===nb&&(c["@value"]=parseFloat(c["@value"]));-1===[mb,ob,nb,pb].indexOf(d)&&(c["@type"]=d)}else d!==pb&&(c["@type"]=d)}return c}function l(a,b){for(var c=["subject","predicate","object"],d=0;d<c.length;++d){var e=c[d];if(a[e].type!==b[e].type||a[e].value!==b[e].value)return!1}return a.object.language!==b.object.language?!1:a.object.datatype!==b.object.datatype?!1:!0}function m(a,b){if("hash"in b[a])return b[a].hash;for(var c=b[a].quads,d=[],e=0;e<c.length;++e)d.push(cb(c[e],c[e].name?c[e].name.value:null,a));d.sort();var f=b[a].hash=Fb.hash(d);return f}function n(a,b,d,e,f){function g(f){if(f===l.length)return i=Object.keys(k).sort(),h(0);var j=l[f],n=o(j.subject,a),p=null;if(null!==n?p="p":(n=o(j.object,a),null!==n&&(p="r")),null!==n){var q;q=d.isNamed(n)?d.getName(n):e.isNamed(n)?e.getName(n):m(n,b,d);var r=Fb.create();r.update(p),r.update(j.predicate.value),r.update(q);var s=r.digest();s in k?k[s].push(n):k[s]=[n]}c.setImmediate(function(){g(f+1)})}function h(a){function g(){function i(a){if(a===s.length)return k(!1);var c=s[a];n(c,b,d,q,function(b,d){return b?f(b):(r+=q.getName(c)+"<"+d.hash+">",q=d.pathNamer,null!==m&&r.length>=m.length&&r>m?k(!0):void i(a+1))})}function k(b){!b&&(null===m||m>r)&&(m=r,o=q),p.hasNext()?c.setImmediate(function(){g()}):(j.update(m),e=o,h(a+1))}var l=p.next(),q=e.clone(),r="",s=[];for(var t in l){var u=l[t];if(d.isNamed(u)?r+=d.getName(u):(q.isNamed(u)||s.push(u),r+=q.getName(u)),null!==m&&r.length>=m.length&&r>m)return k(!0)}i(0)}if(a===i.length)return f(null,{hash:j.digest(),pathNamer:e});var l=i[a];j.update(l);var m=null,o=null,p=new Eb(k[l]);c.setImmediate(function(){g()})}var i,j=Fb.create(),k={},l=b[a].quads;c.setImmediate(function(){g(0)})}function o(a,b){return"blank node"===a.type&&a.value!==b?a.value:null}function p(a,b,d,e,f,g){if(L(a))for(var h=0;h<a.length;++h)p(a[h],b,d,e,void 0,g);else{if(!J(a))return void(g&&g.push(a));if(V(a)){if("@type"in a){var i=a["@type"];0===i.indexOf("_:")&&(a["@type"]=i=e.getName(i))}return void(g&&g.push(a))}if("@type"in a)for(var j=a["@type"],h=0;h<j.length;++h){var i=j[h];0===i.indexOf("_:")&&e.getName(i)}S(f)&&(f=X(a)?e.getName(a["@id"]):a["@id"]),g&&g.push({"@id":f});var k=b[d],l=k[f]=k[f]||{};l["@id"]=f;for(var m=Object.keys(a).sort(),n=0;n<m.length;++n){var o=m[n];if("@id"!==o)if("@reverse"!==o)if("@graph"!==o)if("@type"!==o&&I(o)){if("@index"===o&&"@index"in l)throw new Cb("Invalid JSON-LD syntax; conflicting @index property detected.","jsonld.SyntaxError",{code:"conflicting indexes",subject:l});l[o]=a[o]}else{var q=a[o];if(0===o.indexOf("_:")&&(o=e.getName(o)),0!==q.length)for(var r=0;r<q.length;++r){var s=q[r];if("@type"===o&&(s=0===s.indexOf("_:")?e.getName(s):s),T(s)||U(s)){var t=X(s)?e.getName(s["@id"]):s["@id"];c.addValue(l,o,{"@id":t},{propertyIsArray:!0,allowDuplicate:!1}),p(s,b,d,e,t)}else if(W(s)){var u=[];p(s["@list"],b,d,e,f,u),s={"@list":u},c.addValue(l,o,s,{propertyIsArray:!0,allowDuplicate:!1})}else p(s,b,d,e,f),c.addValue(l,o,s,{propertyIsArray:!0,allowDuplicate:!1})}else c.addValue(l,o,[],{propertyIsArray:!0})}else{f in b||(b[f]={});var v="@merged"===d?d:f;p(a[o],b,v,e)}else{var w={"@id":f},x=a["@reverse"];for(var y in x)for(var z=x[y],A=0;A<z.length;++A){var B=z[A],C=B["@id"];X(B)&&(C=e.getName(C)),p(B,b,d,e,C),c.addValue(k[C],y,w,{propertyIsArray:!0,allowDuplicate:!1})}}}}}function q(a,b,d,e,f){s(a,d),d=d[0];var g=a.options,h=r(d,g,"embed"),i=r(d,g,"explicit"),j=r(d,g,"requireAll"),k={embed:h,explicit:i,requireAll:j},l=t(a,b,d,k),m=Object.keys(l).sort();for(var n in m){var o=m[n];null===f&&(a.embeds={});var p={};p["@id"]=o;var u={parent:e,property:f};if(h&&o in a.embeds){h=!1;var y=a.embeds[o];if(L(y.parent)){for(var z=0;z<y.parent.length;++z)if(c.compareValues(p,y.parent[z])){h=!0;break}}else c.hasValue(y.parent,y.property,p)&&(h=!0);h&&w(a,o)}if(h){a.embeds[o]=u;for(var A=l[o],B=Object.keys(A).sort(),z=0;z<B.length;z++){var C=B[z];if(I(C))p[C]=Z(A[C]);else if(C in d)for(var D=A[C],E=0;E<D.length;++E){var F=D[E];if(W(F)){var G={"@list":[]};x(a,p,C,G);var H=F["@list"];for(var J in H)F=H[J],U(F)?q(a,[F["@id"]],d[C][0]["@list"],G,"@list"):x(a,G,"@list",Z(F))}else U(F)?q(a,[F["@id"]],d[C],p,C):x(a,p,C,Z(F))}else i||v(a,A,C,p)}for(var B=Object.keys(d).sort(),z=0;z<B.length;++z){var C=B[z];if(!I(C)){var K=d[C][0],M=r(K,g,"omitDefault");if(!(M||C in p)){var N="@null";"@default"in K&&(N=Z(K["@default"])),L(N)||(N=[N]),p[C]=[{"@preserve":N}]}}}x(a,e,f,p)}else x(a,e,f,p)}}function r(a,b,c){var d="@"+c;return d in a?a[d][0]:b[c]}function s(a,b){if(!L(b)||1!==b.length||!J(b[0]))throw new Cb("Invalid JSON-LD syntax; a JSON-LD frame must be a single object.","jsonld.SyntaxError",{frame:b})}function t(a,b,c,d){for(var e={},f=0;f<b.length;++f){var g=b[f],h=a.subjects[g];u(h,c,d)&&(e[g]=h)}return e}function u(a,b,d){if("@type"in b&&(1!==b["@type"].length||!J(b["@type"][0]))){for(var e=b["@type"],f=0;f<e.length;++f)if(c.hasValue(a,"@type",e[f]))return!0;return!1}var g=!0,h=!1;for(var i in b){if(I(i)){if("@id"!==i&&"@type"!==i)continue;if(g=!1,"@id"===i&&N(b[i])){if(a[i]!==b[i])return!1;h=!0;continue}}if(g=!1,i in a){if(L(b[i])&&0===b[i].length&&void 0!==a[i])return!1;h=!0}else{var j=L(b[i])&&J(b[i][0])&&"@default"in b[i][0];if(d.requireAll&&!j)return!1}}return g||h}function v(a,b,c,d){for(var e=b[c],f=0;f<e.length;++f){var g=e[f];if(W(g)){var h={"@list":[]};return x(a,d,c,h),v(a,g,"@list",h["@list"])}if(U(g)){var i=g["@id"];if(!(i in a.embeds)){var j={parent:d,property:c};a.embeds[i]=j,g={};var k=a.subjects[i];for(var l in k)I(l)?g[l]=Z(k[l]):v(a,k,l,g)}x(a,d,c,g)}else x(a,d,c,Z(g))}}function w(a,b){var d=a.embeds,e=d[b],f=e.parent,g=e.property,h={"@id":b};if(L(f)){for(var i=0;i<f.length;++i)if(c.compareValues(f[i],h)){f[i]=h;break}}else{var j=L(f[g]);c.removeValue(f,g,h,{propertyIsArray:j}),c.addValue(f,g,h,{propertyIsArray:j})}var k=function(a){for(var b=Object.keys(d),c=0;c<b.length;++c){var e=b[c];e in d&&J(d[e].parent)&&d[e].parent["@id"]===a&&(delete d[e],k(e))}};k(b)}function x(a,b,d,e){J(b)?c.addValue(b,d,e,{propertyIsArray:!0}):b.push(e)}function y(a,b,d){if(L(b)){for(var e=[],f=0;f<b.length;++f){var g=y(a,b[f],d);null!==g&&e.push(g)}b=e}else if(J(b)){if("@preserve"in b)return"@null"===b["@preserve"]?null:b["@preserve"];if(V(b))return b;if(W(b))return b["@list"]=y(a,b["@list"],d),b;for(var h in b){var g=y(a,b[h],d),i=c.getContextValue(a,h,"@container");d.compactArrays&&L(g)&&1===g.length&&null===i&&(g=g[0]),b[h]=g}}return b}function z(a,b){return a.length<b.length?-1:b.length<a.length?1:a===b?0:b>a?-1:1}function A(a,b,c,d,e,f){null===f&&(f="@null");var g=[];if("@id"!==f&&"@reverse"!==f||!U(c))g.push(f);else{"@reverse"===f&&g.push("@reverse");var h=B(a,c["@id"],null,{vocab:!0});h in a.mappings&&a.mappings[h]&&a.mappings[h]["@id"]===c["@id"]?g.push.apply(g,["@vocab","@id"]):g.push.apply(g,["@id","@vocab"])}g.push("@none");for(var i=a.inverse[b],j=0;j<d.length;++j){var k=d[j];if(k in i)for(var l=i[k][e],m=0;m<g.length;++m){var n=g[m];if(n in l)return l[n]}}return null}function B(a,b,c,d,e){if(null===b)return b;if(S(c)&&(c=null),S(e)&&(e=!1),d=d||{},I(b)&&(d.vocab=!0),d.vocab&&b in a.getInverse()){var f=a["@language"]||"@none",g=[];J(c)&&"@index"in c&&g.push("@index");var h="@language",i="@null";if(e)h="@type",i="@reverse",g.push("@set");else if(W(c)){"@index"in c||g.push("@list");for(var j=c["@list"],k=0===j.length?f:null,l=null,m=0;m<j.length;++m){var n=j[m],o="@none",p="@none";if(V(n)?"@language"in n?o=n["@language"]:"@type"in n?p=n["@type"]:o="@null":p="@id",null===k?k=o:o!==k&&V(n)&&(k="@none"),null===l?l=p:p!==l&&(l="@none"),"@none"===k&&"@none"===l)break}k=k||"@none",l=l||"@none","@none"!==l?(h="@type",i=l):i=k}else V(c)?"@language"in c&&!("@index"in c)?(g.push("@language"),i=c["@language"]):"@type"in c&&(h="@type",i=c["@type"]):(h="@type",i="@id"),g.push("@set");g.push("@none");var q=A(a,b,c,g,h,i);if(null!==q)return q}if(d.vocab&&"@vocab"in a){var r=a["@vocab"];if(0===b.indexOf(r)&&b!==r){var s=b.substr(r.length);if(!(s in a.mappings))return s}}var t=null;for(var q in a.mappings)if(-1===q.indexOf(":")){var u=a.mappings[q];if(u&&u["@id"]!==b&&0===b.indexOf(u["@id"])){var v=q+":"+b.substr(u["@id"].length),w=!(v in a.mappings)||null===c&&a.mappings[v]&&a.mappings[v]["@id"]===b;w&&(null===t||z(v,t)<0)&&(t=v)}}return null!==t?t:d.vocab?b:G(a["@base"],b)}function C(a,b,d){if(V(d)){var e=c.getContextValue(a,b,"@type"),f=c.getContextValue(a,b,"@language"),g=c.getContextValue(a,b,"@container"),h="@index"in d&&"@index"!==g;if(!h&&(d["@type"]===e||d["@language"]===f))return d["@value"];var i=Object.keys(d).length,j=1===i||2===i&&"@index"in d&&!h,k="@language"in a,l=N(d["@value"]),m=a.mappings[b]&&null===a.mappings[b]["@language"];if(j&&(!k||!l||m))return d["@value"];var n={};return h&&(n[B(a,"@index")]=d["@index"]),"@type"in d?n[B(a,"@type")]=B(a,d["@type"],null,{vocab:!0}):"@language"in d&&(n[B(a,"@language")]=d["@language"]),n[B(a,"@value")]=d["@value"],n}var o=E(a,b,{vocab:!0}),e=c.getContextValue(a,b,"@type"),p=B(a,d["@id"],null,{vocab:"@vocab"===e});if("@id"===e||"@vocab"===e||"@graph"===o)return p;var n={};return n[B(a,"@id")]=p,n}function D(a,b,c,d){if(c in d){if(d[c])return;throw new Cb("Cyclical context definition detected.","jsonld.CyclicalContext",{code:"cyclic IRI mapping",context:b,term:c})}if(d[c]=!1,I(c))throw new Cb("Invalid JSON-LD syntax; keywords cannot be overridden.","jsonld.SyntaxError",{code:"keyword redefinition",context:b,term:c});if(""===c)throw new Cb("Invalid JSON-LD syntax; a term cannot be an empty string.","jsonld.SyntaxError",{code:"invalid term definition",context:b});a.mappings[c]&&delete a.mappings[c];var e=b[c];if(null===e||J(e)&&null===e["@id"])return a.mappings[c]=null,void(d[c]=!0);if(N(e)&&(e={"@id":e}),!J(e))throw new Cb("Invalid JSON-LD syntax; @context property values must be strings or objects.","jsonld.SyntaxError",{code:"invalid term definition",context:b});var f=a.mappings[c]={};if(f.reverse=!1,"@reverse"in e){if("@id"in e)throw new Cb("Invalid JSON-LD syntax; a @reverse term definition must not contain @id.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});var g=e["@reverse"];if(!N(g))throw new Cb("Invalid JSON-LD syntax; a @context @reverse value must be a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});var h=E(a,g,{vocab:!0,base:!1},b,d);if(!Y(h))throw new Cb("Invalid JSON-LD syntax; a @context @reverse value must be an absolute IRI or a blank node identifier.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h,f.reverse=!0}else if("@id"in e){var h=e["@id"];if(!N(h))throw new Cb("Invalid JSON-LD syntax; a @context @id value must be an array of strings or a string.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});if(h!==c){if(h=E(a,h,{vocab:!0,base:!1},b,d),!Y(h)&&!I(h))throw new Cb("Invalid JSON-LD syntax; a @context @id value must be an absolute IRI, a blank node identifier, or a keyword.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b});f["@id"]=h}}if(!("@id"in f)){var i=c.indexOf(":");if(-1!==i){var j=c.substr(0,i);if(j in b&&D(a,b,j,d),a.mappings[j]){var k=c.substr(i+1);f["@id"]=a.mappings[j]["@id"]+k}else f["@id"]=c}else{if(!("@vocab"in a))throw new Cb("Invalid JSON-LD syntax; @context terms must define an @id.","jsonld.SyntaxError",{code:"invalid IRI mapping",context:b,term:c});f["@id"]=a["@vocab"]+c}}if(d[c]=!0,"@type"in e){var l=e["@type"];if(!N(l))throw new Cb("Invalid JSON-LD syntax; an @context @type values must be a string.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if("@id"!==l&&"@vocab"!==l){if(l=E(a,l,{vocab:!0,base:!1},b,d),!Y(l))throw new Cb("Invalid JSON-LD syntax; an @context @type value must be an absolute IRI.","jsonld.SyntaxError",{code:"invalid type mapping",context:b});if(0===l.indexOf("_:"))throw new Cb("Invalid JSON-LD syntax; an @context @type values must be an IRI, not a blank node identifier.","jsonld.SyntaxError",{code:"invalid type mapping",context:b})}f["@type"]=l}if("@container"in e){var m=e["@container"];if("@list"!==m&&"@set"!==m&&"@index"!==m&&"@language"!==m)throw new Cb("Invalid JSON-LD syntax; @context @container value must be one of the following: @list, @set, @index, or @language.","jsonld.SyntaxError",{code:"invalid container mapping",context:b});if(f.reverse&&"@index"!==m&&"@set"!==m&&null!==m)throw new Cb("Invalid JSON-LD syntax; @context @container value for a @reverse type definition must be @index or @set.","jsonld.SyntaxError",{code:"invalid reverse property",context:b});f["@container"]=m}if("@language"in e&&!("@type"in e)){var n=e["@language"];if(null!==n&&!N(n))throw new Cb("Invalid JSON-LD syntax; @context @language value must be a string or null.","jsonld.SyntaxError",{code:"invalid language mapping",context:b});null!==n&&(n=n.toLowerCase()),f["@language"]=n}var h=f["@id"];if("@context"===h||"@preserve"===h)throw new Cb("Invalid JSON-LD syntax; @context and @preserve cannot be aliased.","jsonld.SyntaxError",{code:"invalid keyword alias",context:b})}function E(a,b,c,d,e){if(null===b||I(b))return b;if(d&&b in d&&e[b]!==!0&&D(a,d,b,e),c=c||{},c.vocab){var f=a.mappings[b];if(null===f)return null;if(f)return f["@id"]}var g=b.indexOf(":");if(-1!==g){var h=b.substr(0,g),i=b.substr(g+1);if("_"===h||0===i.indexOf("//"))return b;d&&h in d&&D(a,d,h,e);var f=a.mappings[h];return f?f["@id"]+i:b}if(c.vocab&&"@vocab"in a)return a["@vocab"]+b;var j=b;return c.base&&(j=F(a["@base"],j)),j}function F(a,b){if(null===a)return b;if(-1!==b.indexOf(":"))return b;N(a)&&(a=c.url.parse(a||""));var d=c.url.parse(b),e=a.protocol||"";d.authority?e+="//"+d.authority:""!==a.href&&(e+="//"+a.authority);var f;0===d.pathname.indexOf("/")?f=d.pathname:(f=a.pathname,""!==d.pathname&&(f=f.substr(0,f.lastIndexOf("/")+1),f.length>0&&"/"!==f.substr(-1)&&(f+="/"),f+=d.pathname)),f=gb(f,""!==e),d.query&&(f+="?"+d.query),d.hash&&(f+=d.hash);var g=e+f;return""===g&&(g="./"),g}function G(a,b){if(null===a)return b;N(a)&&(a=c.url.parse(a||""));var d="";if(""!==a.href?d+=(a.protocol||"")+"//"+a.authority:b.indexOf("//")&&(d+="//"),0!==b.indexOf(d))return b;for(var e=c.url.parse(b.substr(d.length)),f=a.normalizedPath.split("/"),g=e.normalizedPath.split("/"),h=e.hash||e.query?0:1;f.length>0&&g.length>h&&f[0]===g[0];)f.shift(),g.shift();var i="";if(f.length>0){f.pop();for(var j=0;j<f.length;++j)i+="../"}return i+=g.join("/"),e.query&&(i+="?"+e.query),e.hash&&(i+=e.hash),""===i&&(i="./"),i}function H(a){function b(){var a=this;if(a.inverse)return a.inverse;for(var b=a.inverse={},c=a["@language"]||"@none",e=a.mappings,f=Object.keys(e).sort(z),g=0;g<f.length;++g){var h=f[g],i=e[h];if(null!==i){var j=i["@container"]||"@none",k=i["@id"];L(k)||(k=[k]);for(var l=0;l<k.length;++l){var m=k[l],n=b[m];if(n||(b[m]=n={}),n[j]||(n[j]={"@language":{},"@type":{}}),n=n[j],i.reverse)d(i,h,n["@type"],"@reverse");else if("@type"in i)d(i,h,n["@type"],i["@type"]);else if("@language"in i){var o=i["@language"]||"@null";d(i,h,n["@language"],o)}else d(i,h,n["@language"],c),d(i,h,n["@type"],"@none"),d(i,h,n["@language"],"@none")}}}return b}function d(a,b,c,d){d in c||(c[d]=b)}function e(){var a={};return a["@base"]=this["@base"],a.mappings=Z(this.mappings),a.clone=this.clone,a.inverse=null,a.getInverse=this.getInverse,"@language"in this&&(a["@language"]=this["@language"]),"@vocab"in this&&(a["@vocab"]=this["@vocab"]),a}var f=c.url.parse(a.base||"");return{"@base":f,mappings:{},inverse:null,getInverse:b,clone:e}}function I(a){if(!N(a))return!1;switch(a){case"@base":case"@context":case"@container":case"@default":case"@embed":case"@explicit":case"@graph":case"@id":case"@index":case"@language":case"@list":case"@omitDefault":case"@preserve":case"@requireAll":case"@reverse":case"@set":case"@type":case"@value":case"@vocab":return!0}return!1}function J(a){return"[object Object]"===Object.prototype.toString.call(a)}function K(a){return J(a)&&0===Object.keys(a).length}function L(a){return Array.isArray(a)}function M(a){if(!N(a)&&!K(a)){var b=!1;if(L(a)){b=!0;for(var c=0;c<a.length;++c)if(!N(a[c])){b=!1;break}}if(!b)throw new Cb('Invalid JSON-LD syntax; "@type" value must a string, an array of strings, or an empty object.',"jsonld.SyntaxError",{code:"invalid type value",value:a})}}function N(a){return"string"==typeof a||"[object String]"===Object.prototype.toString.call(a)}function O(a){return"number"==typeof a||"[object Number]"===Object.prototype.toString.call(a)}function P(a){return O(a)&&-1!==String(a).indexOf(".")}function Q(a){return!isNaN(parseFloat(a))&&isFinite(a)}function R(a){return"boolean"==typeof a||"[object Boolean]"===Object.prototype.toString.call(a)}function S(a){return"undefined"==typeof a}function T(a){var b=!1;if(J(a)&&!("@value"in a||"@set"in a||"@list"in a)){var c=Object.keys(a).length;b=c>1||!("@id"in a)}return b}function U(a){return J(a)&&1===Object.keys(a).length&&"@id"in a}function V(a){return J(a)&&"@value"in a}function W(a){return J(a)&&"@list"in a}function X(a){var b=!1;return J(a)&&(b="@id"in a?0===a["@id"].indexOf("_:"):0===Object.keys(a).length||!("@value"in a||"@set"in a||"@list"in a)),b}function Y(a){return N(a)&&-1!==a.indexOf(":")}function Z(a){if(a&&"object"==typeof a){var b;if(L(a)){b=[];for(var c=0;c<a.length;++c)b[c]=Z(a[c])}else if(J(a)){b={};for(var d in a)b[d]=Z(a[d])}else b=a.toString();return b}return a}function $(a,b,c,d){var e=Object.keys(b).length;if(L(a)){for(var f=0;f<a.length;++f)$(a[f],b,c,d);return e<Object.keys(b).length}if(J(a)){for(var g in a)if("@context"===g){var h=a[g];if(L(h))for(var i=h.length,f=0;i>f;++f){var j=h[f];N(j)&&(j=F(d,j),c?(j=b[j],L(j)?(Array.prototype.splice.apply(h,[f,1].concat(j)),f+=j.length,i+=j.length):h[f]=j):j in b||(b[j]=!1))}else N(h)&&(h=F(d,h),c?a[g]=b[h]:h in b||(b[h]=!1))}else $(a[g],b,c,d);return e<Object.keys(b).length}return!1}function _(a,b,c){var d=null,e=b.documentLoader,f=function(a,b,c,e,g){if(Object.keys(b).length>Bb)return d=new Cb("Maximum number of @context URLs exceeded.","jsonld.ContextUrlError",{code:"loading remote context failed",max:Bb}),g(d);var h={},i=function(){$(a,h,!0,e),g(null,a)};$(a,h,!1,e)||i();var j=[];for(var k in h)h[k]===!1&&j.push(k);for(var l=j.length,m=0;m<j.length;++m)!function(a){if(a in b)return d=new Cb("Cyclical @context URLs detected.","jsonld.ContextUrlError",{code:"recursive context inclusion",url:a}),g(d);var e=Z(b);e[a]=!0;var j=function(b,j){if(!d){var k=j?j.document:null;if(!b&&N(k))try{k=JSON.parse(k)}catch(m){b=m}if(b?b=new Cb("Dereferencing a URL did not result in a valid JSON-LD object. Possible causes are an inaccessible URL perhaps due to a same-origin policy (ensure the server uses CORS if you are using client-side JavaScript), too many redirects, a non-JSON response, or more than one HTTP Link Header was provided for a remote context.","jsonld.InvalidUrl",{code:"loading remote context failed",url:a,cause:b}):J(k)||(b=new Cb("Dereferencing a URL did not result in a JSON object. The response was valid JSON, but it was not a JSON object.","jsonld.InvalidUrl",{code:"invalid remote context",url:a,cause:b})),b)return d=b,g(d);k="@context"in k?{"@context":k["@context"]}:{"@context":{}},j.contextUrl&&(L(k["@context"])||(k["@context"]=[k["@context"]]),k["@context"].push(j.contextUrl)),f(k,e,c,a,function(b,c){return b?g(b):(h[a]=c["@context"],l-=1,void(0===l&&i()))})}},k=c(a,j);k&&"then"in k&&k.then(j.bind(null,null),j)}(j[m])};f(a,{},e,b.base,c)}function ab(a){for(var b="(?:<([^:]+:[^>]*)>)",c="(_:(?:[A-Za-z0-9]+))",d='"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)"',e="(?:\\^\\^"+b+")",f="(?:@([a-z]+(?:-[a-z0-9]+)*))",g="(?:"+d+"(?:"+e+"|"+f+")?)",h="[ \\t]+",i="[ \\t]*",j=/(?:\r\n)|(?:\n)|(?:\r)/g,k=new RegExp("^"+i+"$"),m="(?:"+b+"|"+c+")"+h,n=b+h,o="(?:"+b+"|"+c+"|"+g+")"+i,p="(?:\\.|(?:(?:"+b+"|"+c+")"+i+"\\.))",q=new RegExp("^"+i+m+n+o+p+i+"$"),r={},s=a.split(j),t=0,u=0;u<s.length;++u){var v=s[u];if(t++,!k.test(v)){var w=v.match(q);if(null===w)throw new Cb("Error while parsing N-Quads; invalid quad.","jsonld.ParseError",{line:t});var x={};if(x.subject=S(w[1])?{type:"blank node",value:w[2]}:{type:"IRI",value:w[1]},x.predicate={type:"IRI",value:w[3]},S(w[4]))if(S(w[5])){x.object={type:"literal"},S(w[7])?S(w[8])?x.object.datatype=pb:(x.object.datatype=zb,x.object.language=w[8]):x.object.datatype=w[7];var y=w[6].replace(/\\"/g,'"').replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\\\/g,"\\");x.object.value=y}else x.object={type:"blank node",value:w[5]};else x.object={type:"IRI",value:w[4]};var z="@default";if(S(w[9])?S(w[10])||(z=w[10]):z=w[9],z in r){for(var A=!0,B=r[z],C=0;A&&C<B.length;++C)l(B[C],x)&&(A=!1);A&&B.push(x)}else r[z]=[x]}}return r}function bb(a){var b=[];for(var c in a)for(var d=a[c],e=0;e<d.length;++e){var f=d[e];"@default"===c&&(c=null),b.push(cb(f,c))}return b.sort(),b.join("")}function cb(a,b,c){var d=a.subject,e=a.predicate,f=a.object,g=b,h="";if(h+="IRI"===d.type?"<"+d.value+">":c?d.value===c?"_:a":"_:z":d.value,h+=" ",h+="IRI"===e.type?"<"+e.value+">":c?"_:p":e.value,h+=" ","IRI"===f.type)h+="<"+f.value+">";else if("blank node"===f.type)h+=c?f.value===c?"_:a":"_:z":f.value;else{var i=f.value.replace(/\\/g,"\\\\").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\"/g,'\\"');h+='"'+i+'"',f.datatype===zb?f.language&&(h+="@"+f.language):f.datatype!==pb&&(h+="^^<"+f.datatype+">")}return null!==g&&(h+=0!==g.indexOf("_:")?" <"+g+">":c?" _:g":" "+g),h+=" .\n"}function db(a){var b={};b["@default"]=[];for(var c=a.getSubjects(),d=0;d<c.length;++d){var e=c[d];if(null!==e){var f=a.getSubjectTriples(e);if(null!==f){var g=f.predicates;for(var h in g)for(var i=g[h].objects,j=0;j<i.length;++j){var k=i[j],l={};l.subject=0===e.indexOf("_:")?{type:"blank node",value:e}:{type:"IRI",value:e},l.predicate=0===h.indexOf("_:")?{type:"blank node",value:h}:{type:"IRI",value:h};var m=k.value;if(k.type===xb){kb||Ib();var n=new kb;m="";for(var o=0;o<k.value.length;o++)k.value[o].nodeType===lb.ELEMENT_NODE?m+=n.serializeToString(k.value[o]):k.value[o].nodeType===lb.TEXT_NODE&&(m+=k.value[o].nodeValue)}l.object={},k.type===yb?l.object.type=0===k.value.indexOf("_:")?"blank node":"IRI":(l.object.type="literal",k.type===wb?k.language?(l.object.datatype=zb,l.object.language=k.language):l.object.datatype=pb:l.object.datatype=k.type),l.object.value=m,b["@default"].push(l)}}}}return b}function eb(a){this.prefix=a,this.counter=0,this.existing={}}function fb(a){if(-1!==a.href.indexOf(":")||0!==a.href.indexOf("//")||a.host)a.authority=a.host||"",a.auth&&(a.authority=a.auth+"@"+a.authority);else{a.pathname=a.pathname.substr(2);var b=a.pathname.indexOf("/");-1===b?(a.authority=a.pathname,a.pathname=""):(a.authority=a.pathname.substr(0,b),a.pathname=a.pathname.substr(b))}}function gb(a,b){var c="";0===a.indexOf("/")&&(c="/");for(var d=a.split("/"),e=[];d.length>0;)"."===d[0]||""===d[0]&&d.length>1?d.shift():".."!==d[0]?e.push(d.shift()):(d.shift(),b||e.length>0&&".."!==e[e.length-1]?e.pop():e.push(".."));return c+e.join("/")}c.compact=function(a,b,d,e){function f(a,c,d,f){if(a)return e(a);f.compactArrays&&!f.graph&&L(c)?1===c.length?c=c[0]:0===c.length&&(c={}):f.graph&&J(c)&&(c=[c]),J(b)&&"@context"in b&&(b=b["@context"]),b=Z(b),L(b)||(b=[b]);var g=b;b=[];for(var h=0;h<g.length;++h)(!J(g[h])||Object.keys(g[h]).length>0)&&b.push(g[h]);var i=b.length>0;if(1===b.length&&(b=b[0]),L(c)){var j=B(d,"@graph"),k=c;c={},i&&(c["@context"]=b),c[j]=k}else if(J(c)&&i){var k=c;c={"@context":b};for(var l in k)c[l]=k[l]}e(null,c,d)}if(arguments.length<2)return c.nextTick(function(){e(new TypeError("Could not compact, too few arguments."))});if("function"==typeof d&&(e=d,d={}),d=d||{},null===b)return c.nextTick(function(){e(new Cb("The compaction context must not be null.","jsonld.CompactError",{code:"invalid local context"}))});if(null===a)return c.nextTick(function(){e(null,null)});"base"in d||(d.base="string"==typeof a?a:""),"compactArrays"in d||(d.compactArrays=!0),"graph"in d||(d.graph=!1),"skipExpansion"in d||(d.skipExpansion=!1),"documentLoader"in d||(d.documentLoader=c.loadDocument);var g=function(a,b,d){c.nextTick(function(){return b.skipExpansion?d(null,a):void c.expand(a,b,d)})};g(a,d,function(a,g){if(a)return e(new Cb("Could not expand input before compaction.","jsonld.CompactError",{cause:a}));var h=H(d);c.processContext(h,b,d,function(a,b){if(a)return e(new Cb("Could not process context before compaction.","jsonld.CompactError",{cause:a}));var c;try{c=(new Db).compact(b,null,g,d)}catch(h){return e(h)}f(null,c,b,d)})})},c.expand=function(a,b,d){function e(a){"base"in b||(b.base=a.documentUrl||"");var c={document:Z(a.document),remoteContext:{"@context":a.contextUrl}};if("expandContext"in b){var e=Z(b.expandContext);c.expandContext="object"==typeof e&&"@context"in e?e:{"@context":e}}_(c,b,function(a,c){if(a)return d(a);var e;try{var f=new Db,g=H(b),h=c.document,i=c.remoteContext["@context"];c.expandContext&&(g=f.processContext(g,c.expandContext["@context"],b)),i&&(g=f.processContext(g,i,b)),e=f.expand(g,null,h,b,!1),J(e)&&"@graph"in e&&1===Object.keys(e).length?e=e["@graph"]:null===e&&(e=[]),L(e)||(e=[e])}catch(j){return d(j)}d(null,e)})}return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not expand, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"documentLoader"in b||(b.documentLoader=c.loadDocument),"keepFreeFloatingNodes"in b||(b.keepFreeFloatingNodes=!1),void c.nextTick(function(){if("string"==typeof a){var c=function(a,b){if(a)return d(a);try{if(!b.document)throw new Cb("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(c){return d(new Cb("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:c,remoteDoc:b}))}e(b)},f=b.documentLoader(a,c);return void(f&&"then"in f&&f.then(c.bind(null,null),c))}e({contextUrl:null,documentUrl:null,document:a})}))},c.flatten=function(a,b,d,e){return arguments.length<1?c.nextTick(function(){e(new TypeError("Could not flatten, too few arguments."))}):("function"==typeof d?(e=d,d={}):"function"==typeof b&&(e=b,b=null,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),void c.expand(a,d,function(a,f){if(a)return e(new Cb("Could not expand input before flattening.","jsonld.FlattenError",{cause:a}));var g;try{g=(new Db).flatten(f)}catch(h){return e(h)}return null===b?e(null,g):(d.graph=!0,d.skipExpansion=!0,void c.compact(g,b,d,function(a,b){return a?e(new Cb("Could not compact flattened output.","jsonld.FlattenError",{cause:a})):void e(null,b)}))}))},c.frame=function(a,b,d,e){function f(b){var f,g=b.document;g?(f=g["@context"],b.contextUrl?(f?L(f)?f.push(b.contextUrl):f=[f,b.contextUrl]:f=b.contextUrl,g["@context"]=f):f=f||{}):f={},c.expand(a,d,function(a,b){if(a)return e(new Cb("Could not expand input before framing.","jsonld.FrameError",{cause:a}));var h=Z(d);h.isFrame=!0,h.keepFreeFloatingNodes=!0,c.expand(g,h,function(a,d){if(a)return e(new Cb("Could not expand frame before framing.","jsonld.FrameError",{cause:a}));var g;try{g=(new Db).frame(b,d,h)}catch(i){return e(i)}h.graph=!0,h.skipExpansion=!0,c.compact(g,f,h,function(a,b,c){if(a)return e(new Cb("Could not compact framed output.","jsonld.FrameError",{cause:a}));var d=B(c,"@graph");b[d]=y(c,b[d],h),e(null,b)})})})}return arguments.length<2?c.nextTick(function(){e(new TypeError("Could not frame, too few arguments."))}):("function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),"embed"in d||(d.embed=!0),d.explicit=d.explicit||!1,"requireAll"in d||(d.requireAll=!0),d.omitDefault=d.omitDefault||!1,void c.nextTick(function(){if("string"==typeof b){var a=function(a,b){if(a)return e(a);try{if(!b.document)throw new Cb("No remote document found at the given URL.","jsonld.NullRemoteDocument");"string"==typeof b.document&&(b.document=JSON.parse(b.document))}catch(c){return e(new Cb("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed",cause:c,remoteDoc:b}))}f(b)},c=d.documentLoader(b,a);return void(c&&"then"in c&&c.then(a.bind(null,null),a))}f({contextUrl:null,documentUrl:null,document:b})}))},c.objectify=function(a,b,d,e){"function"==typeof d&&(e=d,d={}),d=d||{},"base"in d||(d.base="string"==typeof a?a:""),"documentLoader"in d||(d.documentLoader=c.loadDocument),c.expand(a,d,function(a,f){if(a)return e(new Cb("Could not expand input before framing.","jsonld.FrameError",{cause:a}));var g;try{g=(new Db).flatten(f)}catch(h){return e(h)}d.graph=!0,d.skipExpansion=!0,c.compact(g,b,d,function(a,b,f){if(a)return e(new Cb("Could not compact flattened output.","jsonld.FrameError",{cause:a}));
var g=B(f,"@graph");b[g]=y(f,b[g],d);var h=b[g][0],i=function(a){if(J(a)||L(a)){if(J(a)){if(i.visited[a["@id"]])return;i.visited[a["@id"]]=!0}for(var b in a){var d=a[b],e="@id"===c.getContextValue(f,b,"@type");if(L(d)||J(d)||e)if(N(d)&&e)a[b]=d=h[d],i(d);else if(L(d))for(var g=0;g<d.length;++g)N(d[g])&&e?d[g]=h[d[g]]:J(d[g])&&"@id"in d[g]&&(d[g]=h[d[g]["@id"]]),i(d[g]);else if(J(d)){var j=d["@id"];a[b]=d=h[j],i(d)}}}};i.visited={},i(h),b.of_type={};for(var j in h)if("@type"in h[j]){var k=h[j]["@type"];L(k)||(k=[k]);for(var l in k)k[l]in b.of_type||(b.of_type[k[l]]=[]),b.of_type[k[l]].push(h[j])}e(null,b)})})},c.normalize=function(a,b,d){if(arguments.length<1)return c.nextTick(function(){d(new TypeError("Could not normalize, too few arguments."))});"function"==typeof b&&(d=b,b={}),b=b||{},"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument);var e=Z(b);delete e.format,e.produceGeneralizedRdf=!1,c.toRDF(a,e,function(a,c){return a?d(new Cb("Could not convert input to RDF dataset before normalization.","jsonld.NormalizeError",{cause:a})):void(new Db).normalize(c,b,d)})},c.fromRDF=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not convert from RDF, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"useRdfType"in b||(b.useRdfType=!1),"useNativeTypes"in b||(b.useNativeTypes=!1),"format"in b||!N(a)||"format"in b||(b.format="application/nquads"),void c.nextTick(function(){function c(a,b,c){(new Db).fromRDF(a,b,c)}var e;if(b.format){if(e=b.rdfParser||jb[b.format],!e)return d(new Cb("Unknown input format.","jsonld.UnknownFormat",{format:b.format}))}else e=function(){return a};if(a=e(a,function(a,e){return a?d(a):void c(e,b,d)})){if("then"in a)return a.then(function(a){c(a,b,d)},d);c(a,b,d)}}))},c.toRDF=function(a,b,d){return arguments.length<1?c.nextTick(function(){d(new TypeError("Could not convert to RDF, too few arguments."))}):("function"==typeof b&&(d=b,b={}),b=b||{},"base"in b||(b.base="string"==typeof a?a:""),"documentLoader"in b||(b.documentLoader=c.loadDocument),void c.expand(a,b,function(a,c){if(a)return d(new Cb("Could not expand input before serialization to RDF.","jsonld.RdfError",{cause:a}));var e;try{if(e=Db.prototype.toRDF(c,b),b.format){if("application/nquads"===b.format)return d(null,bb(e));throw new Cb("Unknown output format.","jsonld.UnknownFormat",{format:b.format})}}catch(f){return d(f)}d(null,e)}))},c.relabelBlankNodes=function(a){f(new eb("_:b",a))},c.documentLoader=function(b,d){var e=new Cb("Could not retrieve a JSON-LD document from the URL. URL dereferencing not implemented.","jsonld.LoadDocumentError",{code:"loading document failed"});return a?d(e,{contextUrl:null,documentUrl:b,document:null}):c.promisify(function(a){a(e)})},c.loadDocument=function(a,b){var d=c.documentLoader(a,b);d&&"then"in d&&d.then(b.bind(null,null),b)},c.promises=function(){try{c.Promise=global.Promise||require("es6-promise").Promise}catch(a){throw new Error("Unable to find a Promise implementation.")}var b=Array.prototype.slice,d=c.promisify,e={};return e.expand=function(){if(arguments.length<1)throw new TypeError("Could not expand, too few arguments.");return d.apply(null,[c.expand].concat(b.call(arguments)))},e.compact=function(){if(arguments.length<2)throw new TypeError("Could not compact, too few arguments.");var a=function(a,b,d,e){c.compact(a,b,d,function(a,b){e(a,b)})};return d.apply(null,[a].concat(b.call(arguments)))},e.flatten=function(){if(arguments.length<1)throw new TypeError("Could not flatten, too few arguments.");return d.apply(null,[c.flatten].concat(b.call(arguments)))},e.frame=function(){if(arguments.length<2)throw new TypeError("Could not frame, too few arguments.");return d.apply(null,[c.frame].concat(b.call(arguments)))},e.fromRDF=function(){if(arguments.length<1)throw new TypeError("Could not convert from RDF, too few arguments.");return d.apply(null,[c.fromRDF].concat(b.call(arguments)))},e.toRDF=function(){if(arguments.length<1)throw new TypeError("Could not convert to RDF, too few arguments.");return d.apply(null,[c.toRDF].concat(b.call(arguments)))},e.normalize=function(){if(arguments.length<1)throw new TypeError("Could not normalize, too few arguments.");return d.apply(null,[c.normalize].concat(b.call(arguments)))},e},c.promisify=function(a){if(!c.Promise)try{c.Promise=global.Promise||require("es6-promise").Promise}catch(b){throw new Error("Unable to find a Promise implementation.")}var d=Array.prototype.slice.call(arguments,1);return new c.Promise(function(b,c){a.apply(null,d.concat(function(a,d){a?c(a):b(d)}))})},d.prototype=c.promises(),d.prototype.toString=function(){return this instanceof d?"[object JsonLdProcessor]":"[object JsonLdProcessorPrototype]"},c.JsonLdProcessor=d;var hb=!!Object.defineProperty;if(hb)try{Object.defineProperty({},"x",{})}catch(ib){hb=!1}hb&&(Object.defineProperty(d,"prototype",{writable:!1,enumerable:!1}),Object.defineProperty(d.prototype,"constructor",{writable:!0,enumerable:!1,configurable:!0,value:d})),b&&"undefined"==typeof global.JsonLdProcessor&&(hb?Object.defineProperty(global,"JsonLdProcessor",{writable:!0,enumerable:!1,configurable:!0,value:d}):global.JsonLdProcessor=d),"undefined"!=typeof process&&process.nextTick?(c.nextTick=process.nextTick,c.setImmediate="function"==typeof setImmediate?setImmediate:c.nextTick):"function"==typeof setImmediate?c.setImmediate=c.nextTick=function(a){return setImmediate(a)}:(c.setImmediate=function(a){setTimeout(a,0)},c.nextTick=c.setImmediate),c.parseLinkHeader=function(a){for(var b={},c=a.match(/(?:<[^>]*?>|"[^"]*?"|[^,])+/g),d=/\s*<([^>]*?)>\s*(?:;\s*(.*))?/,e=0;e<c.length;++e){var f=c[e].match(d);if(f){for(var g={target:f[1]},h=f[2],i=/(.*?)=(?:(?:"([^"]*?)")|([^"]*?))\s*(?:(?:;\s*)|$)/g;f=i.exec(h);)g[f[1]]=void 0===f[2]?f[3]:f[2];var j=g.rel||"";L(b[j])?b[j].push(g):b[j]=j in b?[b[j],g]:g}}return b},c.DocumentCache=function(a){this.order=[],this.cache={},this.size=a||50,this.expires=3e4},c.DocumentCache.prototype.get=function(a){if(a in this.cache){var b=this.cache[a];if(b.expires>=+new Date)return b.ctx;delete this.cache[a],this.order.splice(this.order.indexOf(a),1)}return null},c.DocumentCache.prototype.set=function(a,b){this.order.length===this.size&&delete this.cache[this.order.shift()],this.order.push(a),this.cache[a]={ctx:b,expires:+new Date+this.expires}},c.ActiveContextCache=function(a){this.order=[],this.cache={},this.size=a||100},c.ActiveContextCache.prototype.get=function(a,b){var c=JSON.stringify(a),d=JSON.stringify(b),e=this.cache[c];return e&&d in e?e[d]:null},c.ActiveContextCache.prototype.set=function(a,b,c){if(this.order.length===this.size){var d=this.order.shift();delete this.cache[d.activeCtx][d.localCtx]}var e=JSON.stringify(a),f=JSON.stringify(b);this.order.push({activeCtx:e,localCtx:f}),e in this.cache||(this.cache[e]={}),this.cache[e][f]=Z(c)},c.cache={activeCtx:new c.ActiveContextCache},c.documentLoaders={},c.documentLoaders.jquery=function(a,b){b=b||{};var d=function(d,e){return 0!==d.indexOf("http:")&&0!==d.indexOf("https:")?e(new Cb('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):b.secure&&0!==d.indexOf("https")?e(new Cb('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null}):void a.ajax({url:d,accepts:{json:"application/ld+json, application/json"},headers:{Accept:"application/ld+json, application/json"},dataType:"json",crossDomain:!0,success:function(a,b,f){var g={contextUrl:null,documentUrl:d,document:a},h=f.getResponseHeader("Content-Type"),i=f.getResponseHeader("Link");if(i&&"application/ld+json"!==h){if(i=c.parseLinkHeader(i)[Ab],L(i))return e(new Cb("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),g);i&&(g.contextUrl=i.target)}e(null,g)},error:function(a,b,c){e(new Cb("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d,cause:c}),{contextUrl:null,documentUrl:d,document:null})}})},e="undefined"!=typeof Promise;return"usePromise"in b&&(e=b.usePromise),e?function(a){return c.promisify(d,a)}:d},c.documentLoaders.node=function(a){function b(i,j,k){if(0!==i.indexOf("http:")&&0!==i.indexOf("https:"))return k(new Cb('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:i}),{contextUrl:null,documentUrl:i,document:null});if(a.secure&&0!==i.indexOf("https"))return k(new Cb('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:i}),{contextUrl:null,documentUrl:i,document:null});var l=h.get(i);return null!==l?k(null,l):void f({url:i,headers:{Accept:"application/ld+json, application/json"},strictSSL:d,followRedirect:!1},function(a,d,f){if(l={contextUrl:null,documentUrl:i,document:f||null},a)return k(new Cb("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:i,cause:a}),l);var m=g.STATUS_CODES[d.statusCode];if(d.statusCode>=400)return k(new Cb("URL could not be dereferenced: "+m,"jsonld.InvalidUrl",{code:"loading document failed",url:i,httpStatusCode:d.statusCode}),l);if(d.headers.link&&"application/ld+json"!==d.headers["content-type"]){var n=c.parseLinkHeader(d.headers.link)[Ab];if(L(n))return k(new Cb("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:i}),l);n&&(l.contextUrl=n.target)}if(d.statusCode>=300&&d.statusCode<400&&d.headers.location)return j.length===e?k(new Cb("URL could not be dereferenced; there were too many redirects.","jsonld.TooManyRedirects",{code:"loading document failed",url:i,httpStatusCode:d.statusCode,redirects:j}),l):-1!==j.indexOf(i)?k(new Cb("URL could not be dereferenced; infinite redirection was detected.","jsonld.InfiniteRedirectDetected",{code:"recursive context inclusion",url:i,httpStatusCode:d.statusCode,redirects:j}),l):(j.push(i),b(d.headers.location,j,k));j.push(i);for(var o=0;o<j.length;++o)h.set(j[o],{contextUrl:null,documentUrl:j[o],document:f});k(a,l)})}a=a||{};var d="strictSSL"in a?a.strictSSL:!0,e="maxRedirects"in a?a.maxRedirects:-1,f=require("request"),g=require("http"),h=new c.DocumentCache,i=function(a,c){b(a,[],c)};return a.usePromise?function(a){return c.promisify(i,a)}:i},c.documentLoaders.xhr=function(a){var b=/(^|(\r\n))link:/i;a=a||{};var d=function(d,e){if(0!==d.indexOf("http:")&&0!==d.indexOf("https:"))return e(new Cb('URL could not be dereferenced; only "http" and "https" URLs are supported.',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null});if(a.secure&&0!==d.indexOf("https"))return e(new Cb('URL could not be dereferenced; secure mode is enabled and the URL\'s scheme is not "https".',"jsonld.InvalidUrl",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null});var f=a.xhr||XMLHttpRequest,g=new f;g.onload=function(){if(g.status>=400)return e(new Cb("URL could not be dereferenced: "+g.statusText,"jsonld.LoadDocumentError",{code:"loading document failed",url:d,httpStatusCode:g.status}),{contextUrl:null,documentUrl:d,document:null});var a,f={contextUrl:null,documentUrl:d,document:g.response},h=g.getResponseHeader("Content-Type");if(b.test(g.getAllResponseHeaders())&&(a=g.getResponseHeader("Link")),a&&"application/ld+json"!==h){if(a=c.parseLinkHeader(a)[Ab],L(a))return e(new Cb("URL could not be dereferenced, it has more than one associated HTTP Link Header.","jsonld.InvalidUrl",{code:"multiple context link headers",url:d}),f);a&&(f.contextUrl=a.target)}e(null,f)},g.onerror=function(){e(new Cb("URL could not be dereferenced, an error occurred.","jsonld.LoadDocumentError",{code:"loading document failed",url:d}),{contextUrl:null,documentUrl:d,document:null})},g.open("GET",d,!0),g.setRequestHeader("Accept","application/ld+json, application/json"),g.send()},e="undefined"!=typeof Promise;return"usePromise"in a&&(e=a.usePromise),e?function(a){return c.promisify(d,a)}:d},c.useDocumentLoader=function(a){if(!(a in c.documentLoaders))throw new Cb('Unknown document loader type: "'+a+'"',"jsonld.UnknownDocumentLoader",{type:a});c.documentLoader=c.documentLoaders[a].apply(c,Array.prototype.slice.call(arguments,1))},c.processContext=function(a,b){var d={},e=2;arguments.length>3&&(d=arguments[2]||{},e+=1);var f=arguments[e];return"base"in d||(d.base=""),"documentLoader"in d||(d.documentLoader=c.loadDocument),null===b?f(null,H(d)):(b=Z(b),J(b)&&"@context"in b||(b={"@context":b}),void _(b,d,function(b,c){if(b)return f(b);try{c=(new Db).processContext(a,c,d)}catch(e){return f(e)}f(null,c)}))},c.hasProperty=function(a,b){var c=!1;if(b in a){var d=a[b];c=!L(d)||d.length>0}return c},c.hasValue=function(a,b,d){var e=!1;if(c.hasProperty(a,b)){var f=a[b],g=W(f);if(L(f)||g){g&&(f=f["@list"]);for(var h=0;h<f.length;++h)if(c.compareValues(d,f[h])){e=!0;break}}else L(d)||(e=c.compareValues(d,f))}return e},c.addValue=function(a,b,d,e){if(e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1),"allowDuplicate"in e||(e.allowDuplicate=!0),L(d)){0!==d.length||!e.propertyIsArray||b in a||(a[b]=[]);for(var f=0;f<d.length;++f)c.addValue(a,b,d[f],e)}else if(b in a){var g=!e.allowDuplicate&&c.hasValue(a,b,d);L(a[b])||g&&!e.propertyIsArray||(a[b]=[a[b]]),g||a[b].push(d)}else a[b]=e.propertyIsArray?[d]:d},c.getValues=function(a,b){var c=a[b]||[];return L(c)||(c=[c]),c},c.removeProperty=function(a,b){delete a[b]},c.removeValue=function(a,b,d,e){e=e||{},"propertyIsArray"in e||(e.propertyIsArray=!1);var f=c.getValues(a,b).filter(function(a){return!c.compareValues(a,d)});0===f.length?c.removeProperty(a,b):a[b]=1!==f.length||e.propertyIsArray?f:f[0]},c.compareValues=function(a,b){return a===b?!0:V(a)&&V(b)&&a["@value"]===b["@value"]&&a["@type"]===b["@type"]&&a["@language"]===b["@language"]&&a["@index"]===b["@index"]?!0:J(a)&&"@id"in a&&J(b)&&"@id"in b?a["@id"]===b["@id"]:!1},c.getContextValue=function(a,b,c){var d=null;if(null===b)return d;if("@language"===c&&c in a&&(d=a[c]),a.mappings[b]){var e=a.mappings[b];S(c)?d=e:c in e&&(d=e[c])}return d};var jb={};if(c.registerRDFParser=function(a,b){jb[a]=b},c.unregisterRDFParser=function(a){delete jb[a]},a){if("undefined"==typeof kb)var kb=null;if("undefined"==typeof lb)var lb={ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12}}var mb="http://www.w3.org/2001/XMLSchema#boolean",nb="http://www.w3.org/2001/XMLSchema#double",ob="http://www.w3.org/2001/XMLSchema#integer",pb="http://www.w3.org/2001/XMLSchema#string",qb="http://www.w3.org/1999/02/22-rdf-syntax-ns#",rb=qb+"List",sb=qb+"first",tb=qb+"rest",ub=qb+"nil",vb=qb+"type",wb=qb+"PlainLiteral",xb=qb+"XMLLiteral",yb=qb+"object",zb=qb+"langString",Ab="http://www.w3.org/ns/json-ld#context",Bb=10,Cb=function(b,c,d){a&&(Error.call(this),Error.captureStackTrace(this,this.constructor)),this.name=c||"jsonld.Error",this.message=b||"An unspecified JSON-LD error occurred.",this.details=d||{}};a&&require("util").inherits(Cb,Error);var Db=function(){};Db.prototype.compact=function(a,b,d,e){if(L(d)){for(var f=[],g=0;g<d.length;++g){var h=this.compact(a,b,d[g],e);null!==h&&f.push(h)}if(e.compactArrays&&1===f.length){var i=c.getContextValue(a,b,"@container");null===i&&(f=f[0])}return f}if(J(d)){if(V(d)||U(d))return C(a,b,d);for(var j="@reverse"===b,k=Object.keys(d).sort(),f={},l=0;l<k.length;++l){var m=k[l],n=d[m];if("@id"!==m&&"@type"!==m)if("@reverse"!==m)if("@index"!==m){if(0===n.length){var o=B(a,m,n,{vocab:!0},j);c.addValue(f,o,n,{propertyIsArray:!0})}for(var p=0;p<n.length;++p){var q=n[p],o=B(a,m,q,{vocab:!0},j),i=c.getContextValue(a,o,"@container"),r=W(q),s=null;r&&(s=q["@list"]);var t=this.compact(a,o,r?s:q,e);if(r)if(L(t)||(t=[t]),"@list"!==i){var u={};u[B(a,"@list")]=t,t=u,"@index"in q&&(t[B(a,"@index")]=q["@index"])}else if(o in f)throw new Cb('JSON-LD compact error; property has a "@list" @container rule but there is more than a single @list that matches the compacted term in the document. Compaction might mix unwanted items into the list.',"jsonld.SyntaxError",{code:"compaction to list of lists"});if("@language"===i||"@index"===i){var v;o in f?v=f[o]:f[o]=v={},"@language"===i&&V(t)&&(t=t["@value"]),c.addValue(v,q[i],t)}else{var w=!e.compactArrays||"@set"===i||"@list"===i||L(t)&&0===t.length||"@list"===m||"@graph"===m;c.addValue(f,o,t,{propertyIsArray:w})}}}else{var i=c.getContextValue(a,b,"@container");if("@index"===i)continue;var x=B(a,m);c.addValue(f,x,n)}else{var y=this.compact(a,"@reverse",n,e);for(var z in y)if(a.mappings[z]&&a.mappings[z].reverse){var A=y[z],i=c.getContextValue(a,z,"@container"),D="@set"===i||!e.compactArrays;c.addValue(f,z,A,{propertyIsArray:D}),delete y[z]}if(Object.keys(y).length>0){var x=B(a,m);c.addValue(f,x,y)}}else{var y;if(N(n))y=B(a,n,null,{vocab:"@type"===m});else{y=[];for(var p=0;p<n.length;++p)y.push(B(a,n[p],null,{vocab:!0}))}var x=B(a,m),w=L(y)&&0===n.length;c.addValue(f,x,y,{propertyIsArray:w})}}return f}return d},Db.prototype.expand=function(a,b,d,f,h){var i=this;if(null===d||void 0===d)return null;if(!L(d)&&!J(d))return h||null!==b&&"@graph"!==E(a,b,{vocab:!0})?g(a,b,d):null;if(L(d)){var j=[],k=c.getContextValue(a,b,"@container");h=h||"@list"===k;for(var l=0;l<d.length;++l){var m=i.expand(a,b,d[l],f);if(h&&(L(m)||W(m)))throw new Cb("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"});null!==m&&(L(m)?j=j.concat(m):j.push(m))}return j}"@context"in d&&(a=i.processContext(a,d["@context"],f));for(var n=E(a,b,{vocab:!0}),j={},o=Object.keys(d).sort(),p=0;p<o.length;++p){var q,r=o[p],s=d[r];if("@context"!==r){var t=E(a,r,{vocab:!0});if(null!==t&&(Y(t)||I(t))){if(I(t)){if("@reverse"===n)throw new Cb("Invalid JSON-LD syntax; a keyword cannot be used as a @reverse property.","jsonld.SyntaxError",{code:"invalid reverse property map",value:s});if(t in j)throw new Cb("Invalid JSON-LD syntax; colliding keywords detected.","jsonld.SyntaxError",{code:"colliding keywords",keyword:t})}if("@id"===t&&!N(s)){if(!f.isFrame)throw new Cb('Invalid JSON-LD syntax; "@id" value must a string.',"jsonld.SyntaxError",{code:"invalid @id value",value:s});if(!J(s))throw new Cb('Invalid JSON-LD syntax; "@id" value must be a string or an object.',"jsonld.SyntaxError",{code:"invalid @id value",value:s})}if("@type"===t&&M(s),"@graph"===t&&!J(s)&&!L(s))throw new Cb('Invalid JSON-LD syntax; "@graph" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid @graph value",value:s});if("@value"===t&&(J(s)||L(s)))throw new Cb('Invalid JSON-LD syntax; "@value" value must not be an object or an array.',"jsonld.SyntaxError",{code:"invalid value object value",value:s});if("@language"===t){if(!N(s))throw new Cb('Invalid JSON-LD syntax; "@language" value must be a string.',"jsonld.SyntaxError",{code:"invalid language-tagged string",value:s});s=s.toLowerCase()}if("@index"===t&&!N(s))throw new Cb('Invalid JSON-LD syntax; "@index" value must be a string.',"jsonld.SyntaxError",{code:"invalid @index value",value:s});if("@reverse"!==t){var k=c.getContextValue(a,r,"@container");if("@language"===k&&J(s))q=e(s);else if("@index"===k&&J(s))q=function(b){for(var c=[],d=Object.keys(s).sort(),e=0;e<d.length;++e){var g=d[e],h=s[g];L(h)||(h=[h]),h=i.expand(a,b,h,f,!1);for(var j=0;j<h.length;++j){var k=h[j];"@index"in k||(k["@index"]=g),c.push(k)}}return c}(r);else{var u="@list"===t;if(u||"@set"===t){var v=b;if(u&&"@graph"===n&&(v=null),q=i.expand(a,v,s,f,u),u&&W(q))throw new Cb("Invalid JSON-LD syntax; lists of lists are not permitted.","jsonld.SyntaxError",{code:"list of lists"})}else q=i.expand(a,r,s,f,!1)}if(null!==q||"@value"===t)if("@list"===t||W(q)||"@list"!==k||(q=L(q)?q:[q],q={"@list":q}),a.mappings[r]&&a.mappings[r].reverse){var w=j["@reverse"]=j["@reverse"]||{};L(q)||(q=[q]);for(var x=0;x<q.length;++x){var y=q[x];if(V(y)||W(y))throw new Cb('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});c.addValue(w,t,y,{propertyIsArray:!0})}}else{var z=-1===["@index","@id","@type","@value","@language"].indexOf(t);c.addValue(j,t,q,{propertyIsArray:z})}}else{if(!J(s))throw new Cb('Invalid JSON-LD syntax; "@reverse" value must be an object.',"jsonld.SyntaxError",{code:"invalid @reverse value",value:s});if(q=i.expand(a,"@reverse",s,f),"@reverse"in q)for(var A in q["@reverse"])c.addValue(j,A,q["@reverse"][A],{propertyIsArray:!0});var w=j["@reverse"]||null;for(var A in q)if("@reverse"!==A){null===w&&(w=j["@reverse"]={}),c.addValue(w,A,[],{propertyIsArray:!0});for(var B=q[A],x=0;x<B.length;++x){var y=B[x];if(V(y)||W(y))throw new Cb('Invalid JSON-LD syntax; "@reverse" value must not be a @value or an @list.',"jsonld.SyntaxError",{code:"invalid reverse property value",value:q});c.addValue(w,A,y,{propertyIsArray:!0})}}}}}}o=Object.keys(j);var C=o.length;if("@value"in j){if("@type"in j&&"@language"in j)throw new Cb('Invalid JSON-LD syntax; an element containing "@value" may not contain both "@type" and "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:j});var D=C-1;if("@type"in j&&(D-=1),"@index"in j&&(D-=1),"@language"in j&&(D-=1),0!==D)throw new Cb('Invalid JSON-LD syntax; an element containing "@value" may only have an "@index" property and at most one other property which can be "@type" or "@language".',"jsonld.SyntaxError",{code:"invalid value object",element:j});if(null===j["@value"])j=null;else{if("@language"in j&&!N(j["@value"]))throw new Cb("Invalid JSON-LD syntax; only strings may be language-tagged.","jsonld.SyntaxError",{code:"invalid language-tagged value",element:j});if("@type"in j&&(!Y(j["@type"])||0===j["@type"].indexOf("_:")))throw new Cb('Invalid JSON-LD syntax; an element containing "@value" and "@type" must have an absolute IRI for the value of "@type".',"jsonld.SyntaxError",{code:"invalid typed value",element:j})}}else if("@type"in j&&!L(j["@type"]))j["@type"]=[j["@type"]];else if("@set"in j||"@list"in j){if(C>1&&!(2===C&&"@index"in j))throw new Cb('Invalid JSON-LD syntax; if an element has the property "@set" or "@list", then it can have at most one other property that is "@index".',"jsonld.SyntaxError",{code:"invalid set or list object",element:j});"@set"in j&&(j=j["@set"],o=Object.keys(j),C=o.length)}else 1===C&&"@language"in j&&(j=null);return!J(j)||f.keepFreeFloatingNodes||h||null!==b&&"@graph"!==n||(0===C||"@value"in j||"@list"in j||1===C&&"@id"in j)&&(j=null),j},Db.prototype.flatten=function(a){var b=new eb("_:b"),c={"@default":{}};p(a,c,"@default",b);for(var d=c["@default"],e=Object.keys(c).sort(),f=0;f<e.length;++f){var g=e[f];if("@default"!==g){var h=c[g],i=d[g];i?"@graph"in i||(i["@graph"]=[]):d[g]=i={"@id":g,"@graph":[]};for(var j=i["@graph"],k=Object.keys(h).sort(),l=0;l<k.length;++l){var m=h[k[l]];U(m)||j.push(m)}}}for(var n=[],o=Object.keys(d).sort(),q=0;q<o.length;++q){var m=d[o[q]];U(m)||n.push(m)}return n},Db.prototype.frame=function(a,b,c){var d={options:c,graphs:{"@default":{},"@merged":{}}},e=new eb("_:b");p(a,d.graphs,"@merged",e),d.subjects=d.graphs["@merged"];var f=[];return q(d,Object.keys(d.subjects).sort(),b,f,null),f},Db.prototype.normalize=function(a,b,d){function e(a){function b(h){if(h===a.length)return f(g,e,d);var i=a[h],k=m(i,j,u);k in e?(e[k].push(i),d.push(i)):k in g?(e[k]=[g[k],i],d.push(g[k]),d.push(i),delete g[k]):g[k]=i,c.setImmediate(function(){b(h+1)})}var d=[],e={},g={};c.setImmediate(function(){b(0)})}function f(a,b,c){for(var d=!1,f=Object.keys(a).sort(),h=0;h<f.length;++h){var i=a[f[h]];u.getName(i),d=!0}d?e(c):g(b)}function g(a){function b(e){function f(a,c){if(c===a.length){i.sort(function(a,b){return a=a.hash,b=b.hash,b>a?-1:a>b?1:0});for(var g in i)for(var h in i[g].pathNamer.existing)u.getName(h);return b(e+1)}var k=a[c];if(u.isNamed(k))return f(a,c+1);var l=new eb("_:b");l.getName(k),n(k,j,u,l,function(b,e){return b?d(b):(i.push(e),void f(a,c+1))})}if(e===c.length)return h();var g=a[c[e]],i=[];f(g,0)}var c=Object.keys(a).sort();b(0)}function h(){for(var a=[],c=0;c<i.length;++c){for(var e=i[c],f=["subject","object","name"],g=0;g<f.length;++g){var h=f[g];e[h]&&"blank node"===e[h].type&&0!==e[h].value.indexOf("_:c14n")&&(e[h].value=u.getName(e[h].value))}a.push(cb(e,e.name?e.name.value:null))}return a.sort(),b.format?"application/nquads"===b.format?d(null,a.join("")):d(new Cb("Unknown output format.","jsonld.UnknownFormat",{format:b.format})):void d(null,ab(a.join("")))}var i=[],j={};for(var k in a){var l=a[k];"@default"===k&&(k=null);for(var o=0;o<l.length;++o){var p=l[o];null!==k&&(p.name=0===k.indexOf("_:")?{type:"blank node",value:k}:{type:"IRI",value:k}),i.push(p);for(var q=["subject","object","name"],r=0;r<q.length;++r){var s=q[r];if(p[s]&&"blank node"===p[s].type){var t=p[s].value;t in j?j[t].quads.push(p):j[t]={quads:[p]}}}}}var u=new eb("_:c14n");return e(Object.keys(j))},Db.prototype.fromRDF=function(a,b,d){var e={},f={"@default":e},g={};for(var h in a){var i=a[h];h in f||(f[h]={}),"@default"===h||h in e||(e[h]={"@id":h});for(var j=f[h],l=0;l<i.length;++l){var m=i[l],n=m.subject.value,o=m.predicate.value,p=m.object;n in j||(j[n]={"@id":n});var q=j[n],r="IRI"===p.type||"blank node"===p.type;if(!r||p.value in j||(j[p.value]={"@id":p.value}),o!==vb||b.useRdfType||!r){var s=k(p,b.useNativeTypes);if(c.addValue(q,o,s,{propertyIsArray:!0}),r){c.addValue(g,p.value,q["@id"],{propertyIsArray:!0});var t=j[p.value];"usages"in t||(t.usages=[]),t.usages.push({node:q,property:o,value:s})}}else c.addValue(q,"@type",p.value,{propertyIsArray:!0})}}for(var h in f){var u=f[h];if(ub in u)for(var v=u[ub],w=0;w<v.usages.length;++w){for(var x=v.usages[w],q=x.node,y=x.property,z=x.value,A=[],B=[],C=Object.keys(q).length;y===tb&&g[q["@id"]]&&1===g[q["@id"]].length&&1===q.usages.length&&L(q[sb])&&1===q[sb].length&&L(q[tb])&&1===q[tb].length&&(4===C||5===C&&L(q["@type"])&&1===q["@type"].length&&q["@type"][0]===rb)&&(A.push(q[sb][0]),B.push(q["@id"]),x=q.usages[0],q=x.node,y=x.property,z=x.value,C=Object.keys(q).length,0===q["@id"].indexOf("_:")););if(y===sb){if(q["@id"]===ub)continue;z=u[z["@id"]][tb][0],A.pop(),B.pop()}delete z["@id"],z["@list"]=A.reverse();for(var D=0;D<B.length;++D)delete u[B[D]]}}for(var E=[],F=Object.keys(e).sort(),w=0;w<F.length;++w){var G=F[w],q=e[G];if(G in f)for(var i=q["@graph"]=[],u=f[G],H=Object.keys(u).sort(),I=0;I<H.length;++I){var J=u[H[I]];delete J.usages,U(J)||i.push(J)}delete q.usages,U(q)||E.push(q)}d(null,E)},Db.prototype.toRDF=function(a,b){var c=new eb("_:b"),d={"@default":{}};p(a,d,"@default",c);for(var e={},f=Object.keys(d).sort(),g=0;g<f.length;++g){var i=f[g];("@default"===i||Y(i))&&(e[i]=h(d[i],c,b))}return e},Db.prototype.processContext=function(a,b,d){J(b)&&"@context"in b&&L(b["@context"])&&(b=b["@context"]);var e=L(b)?b:[b];if(0===e.length)return a.clone();for(var f=a,g=0;g<e.length;++g){var h=e[g];if(null!==h){if(J(h)&&"@context"in h&&(h=h["@context"]),!J(h))throw new Cb("Invalid JSON-LD syntax; @context must be an object.","jsonld.SyntaxError",{code:"invalid local context",context:h});if(c.cache.activeCtx){var i=c.cache.activeCtx.get(a,h);if(i){f=a=i;continue}}a=f,f=f.clone();var j={};if("@base"in h){var k=h["@base"];if(null===k)k=null;else{if(!N(k))throw new Cb('Invalid JSON-LD syntax; the value of "@base" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h});if(""!==k&&!Y(k))throw new Cb('Invalid JSON-LD syntax; the value of "@base" in a @context must be an absolute IRI or the empty string.',"jsonld.SyntaxError",{code:"invalid base IRI",context:h})}null!==k&&(k=c.url.parse(k||"")),f["@base"]=k,j["@base"]=!0}if("@vocab"in h){var l=h["@vocab"];if(null===l)delete f["@vocab"];else{if(!N(l))throw new Cb('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});if(!Y(l))throw new Cb('Invalid JSON-LD syntax; the value of "@vocab" in a @context must be an absolute IRI.',"jsonld.SyntaxError",{code:"invalid vocab mapping",context:h});f["@vocab"]=l}j["@vocab"]=!0}if("@language"in h){var l=h["@language"];if(null===l)delete f["@language"];else{if(!N(l))throw new Cb('Invalid JSON-LD syntax; the value of "@language" in a @context must be a string or null.',"jsonld.SyntaxError",{code:"invalid default language",context:h});f["@language"]=l.toLowerCase()}j["@language"]=!0}for(var m in h)D(f,h,m,j);c.cache.activeCtx&&c.cache.activeCtx.set(a,h,f)}else f=a=H(d)}return f},Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}),c.registerRDFParser("application/nquads",ab),c.registerRDFParser("rdfa-api",db),eb.prototype.clone=function(){var a=new eb(this.prefix);return a.counter=this.counter,a.existing=Z(this.existing),a},eb.prototype.getName=function(a){if(a&&a in this.existing)return this.existing[a];var b=this.prefix+this.counter;return this.counter+=1,a&&(this.existing[a]=b),b},eb.prototype.isNamed=function(a){return a in this.existing};var Eb=function(a){this.list=a.sort(),this.done=!1,this.left={};for(var b=0;b<a.length;++b)this.left[a[b]]=!0};Eb.prototype.hasNext=function(){return!this.done},Eb.prototype.next=function(){for(var a=this.list.slice(),b=null,c=0,d=this.list.length,e=0;d>e;++e){var f=this.list[e],g=this.left[f];(null===b||f>b)&&(g&&e>0&&f>this.list[e-1]||!g&&d-1>e&&f>this.list[e+1])&&(b=f,c=e)}if(null===b)this.done=!0;else{var h=this.left[b]?c-1:c+1;this.list[c]=this.list[h],this.list[h]=b;for(var e=0;d>e;++e)this.list[e]>b&&(this.left[this.list[e]]=!this.left[this.list[e]])}return a};var Fb=c.sha1={};if(a){var Gb=require("crypto");Fb.create=function(){var a=Gb.createHash("sha1");return{update:function(b){a.update(b,"utf8")},digest:function(){return a.digest("hex")}}}}else Fb.create=function(){return new Fb.MessageDigest};if(Fb.hash=function(a){for(var b=Fb.create(),c=0;c<a.length;++c)b.update(a[c]);return b.digest()},!a){Fb.Buffer=function(){this.data="",this.read=0},Fb.Buffer.prototype.putInt32=function(a){this.data+=String.fromCharCode(a>>24&255)+String.fromCharCode(a>>16&255)+String.fromCharCode(a>>8&255)+String.fromCharCode(255&a)},Fb.Buffer.prototype.getInt32=function(){var a=this.data.charCodeAt(this.read)<<24^this.data.charCodeAt(this.read+1)<<16^this.data.charCodeAt(this.read+2)<<8^this.data.charCodeAt(this.read+3);return this.read+=4,a},Fb.Buffer.prototype.bytes=function(){return this.data.slice(this.read)},Fb.Buffer.prototype.length=function(){return this.data.length-this.read},Fb.Buffer.prototype.compact=function(){this.data=this.data.slice(this.read),this.read=0},Fb.Buffer.prototype.toHex=function(){for(var a="",b=this.read;b<this.data.length;++b){var c=this.data.charCodeAt(b);16>c&&(a+="0"),a+=c.toString(16)}return a},Fb.MessageDigest=function(){Hb.initialized||Hb.init(),this.blockLength=64,this.digestLength=20,this.messageLength=0,this.input=new Fb.Buffer,this.words=new Array(80),this.state={h0:1732584193,h1:4023233417,h2:2562383102,h3:271733878,h4:3285377520}},Fb.MessageDigest.prototype.update=function(a){a=unescape(encodeURIComponent(a)),this.messageLength+=a.length,this.input.data+=a,Hb.update(this.state,this.words,this.input),(this.input.read>2048||0===this.input.length())&&this.input.compact()},Fb.MessageDigest.prototype.digest=function(){var a=this.messageLength,b=new Fb.Buffer;b.data+=this.input.bytes(),b.data+=Hb.padding.substr(0,64-(a+8)%64),b.putInt32(a>>>29&255),b.putInt32(a<<3&4294967295),Hb.update(this.state,this.words,b);
var c=new Fb.Buffer;return c.putInt32(this.state.h0),c.putInt32(this.state.h1),c.putInt32(this.state.h2),c.putInt32(this.state.h3),c.putInt32(this.state.h4),c.toHex()};var Hb={padding:null,initialized:!1};Hb.init=function(){Hb.padding=String.fromCharCode(128);for(var a=String.fromCharCode(0),b=64;b>0;)1&b&&(Hb.padding+=a),b>>>=1,b>0&&(a+=a);Hb.initialized=!0},Hb.update=function(a,b,c){for(var d,e,f,g,h,i,j,k,l=c.length();l>=64;){for(e=a.h0,f=a.h1,g=a.h2,h=a.h3,i=a.h4,k=0;16>k;++k)d=c.getInt32(),b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;20>k;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=h^f&(g^h),d=(e<<5|e>>>27)+j+i+1518500249+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;32>k;++k)d=b[k-3]^b[k-8]^b[k-14]^b[k-16],d=d<<1|d>>>31,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;40>k;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+1859775393+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;60>k;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f&g|h&(f^g),d=(e<<5|e>>>27)+j+i+2400959708+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;for(;80>k;++k)d=b[k-6]^b[k-16]^b[k-28]^b[k-32],d=d<<2|d>>>30,b[k]=d,j=f^g^h,d=(e<<5|e>>>27)+j+i+3395469782+d,i=h,h=g,g=f<<30|f>>>2,f=e,e=d;a.h0+=e,a.h1+=f,a.h2+=g,a.h3+=h,a.h4+=i,l-=64}}}if(!kb)var Ib=function(){kb=require("xmldom").XMLSerializer};if(c.url={},a){var Jb=require("url").parse;c.url.parse=function(a){var b=Jb(a);return b.pathname=b.pathname||"",fb(b),b.normalizedPath=gb(b.pathname,""!==b.authority),b}}else{var Kb={};Kb.options={key:["href","protocol","host","auth","user","password","hostname","port","relative","path","directory","file","query","hash"],parser:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/},c.url.parse=function(a){for(var b=Kb.options,c=b.parser.exec(a),d={},e=14;e--;)d[b.key[e]]=c[e]||"";return d.host&&""===d.path&&(d.path="/"),d.pathname=d.path||"",fb(d),d.normalizedPath=gb(d.pathname,""!==d.authority),d.query&&(d.path=d.path+"?"+d.query),d.protocol&&(d.protocol+=":"),d.hash&&(d.hash="#"+d.hash),d}}return a?c.useDocumentLoader("node"):"undefined"!=typeof XMLHttpRequest&&c.useDocumentLoader("xhr"),a&&(c.use=function(a){switch(a){case"request":c.request=require("./request");break;default:throw new Cb("Unknown extension.","jsonld.UnknownExtension",{extension:a})}}),c},d=function(){return c(function(){return d()})};c(d),a?module.exports=d:"function"==typeof define&&define.amd?define([],function(){return d}):b&&("undefined"==typeof jsonld?jsonld=jsonldjs=d:jsonldjs=d)}();